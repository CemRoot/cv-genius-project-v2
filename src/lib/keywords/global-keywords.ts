// Comprehensive global keyword database for international candidates

export const GLOBAL_KEYWORDS = {
  
  // Language Skills - International Focus
  languages: {
    english: {
      native: ['native english speaker', 'native speaker', 'mother tongue', 'first language'],
      fluent: ['fluent english', 'fluent in english', 'advanced english', 'proficient english'],
      professional: ['professional english', 'business english', 'working proficiency', 'professional working proficiency'],
      intermediate: ['intermediate english', 'conversational english', 'good english', 'competent english'],
      basic: ['basic english', 'elementary english', 'beginner english', 'limited english']
    },
    
    // Common languages in international markets
    european: ['irish gaeilge', 'french', 'german', 'spanish', 'italian', 'portuguese', 'dutch', 'polish', 'hungarian', 'czech', 'slovak'],
    asian: ['mandarin', 'chinese', 'japanese', 'korean', 'hindi', 'arabic', 'thai', 'vietnamese', 'malay', 'indonesian'],
    other: ['russian', 'turkish', 'hebrew', 'swahili', 'filipino', 'tagalog'],
    
    // Language certifications
    certifications: {
      english: ['ielts', 'toefl', 'cambridge english', 'pte academic', 'oet', 'toeic', 'celpip'],
      other: ['delf', 'dalf', 'dele', 'goethe', 'jlpt', 'hsk', 'topik']
    }
  },

  // Global Certifications & Qualifications  
  certifications: {
    // Technology
    technology: ['aws certified', 'azure certified', 'google cloud', 'cisco certified', 'microsoft certified', 'oracle certified', 'salesforce certified', 'comptia', 'cissp', 'ceh'],
    
    // Project Management
    projectManagement: ['pmp', 'prince2', 'agile certified', 'scrum master', 'csm', 'safe', 'lean six sigma', 'itil'],
    
    // Business & Finance
    business: ['cpa', 'cfa', 'frm', 'acca', 'cima', 'caia', 'cia', 'cisa', 'mba'],
    
    // Healthcare
    healthcare: ['cpr certified', 'first aid', 'bls', 'acls', 'registered nurse', 'licensed practical nurse'],
    
    // Marketing & Sales
    marketing: ['google ads certified', 'facebook blueprint', 'hubspot certified', 'salesforce certified', 'google analytics'],
    
    // International Business
    international: ['import export license', 'customs clearance', 'international trade', 'cross-cultural certification']
  },

  // Remote Work & Flexibility Terms
  remoteWork: {
    arrangements: ['remote work', 'work from home', 'wfh', 'hybrid work', 'distributed team', 'virtual team', 'telecommute', 'flexible work'],
    skills: ['remote collaboration', 'virtual communication', 'digital nomad', 'asynchronous communication', 'timezone coordination'],
    tools: ['zoom', 'teams', 'slack', 'asana', 'trello', 'notion', 'figma', 'miro', 'confluence'],
    preferences: ['open to remote', 'remote-first', 'location independent', 'willing to work remotely', 'flexible location']
  },

  // Relocation & Mobility Terms
  relocation: {
    willingness: ['willing to relocate', 'open to relocation', 'flexible location', 'ready to move', 'considering relocation'],
    experience: ['international experience', 'lived abroad', 'worked internationally', 'global experience', 'cross-cultural experience'],
    support: ['relocation assistance', 'relocation package', 'moving allowance', 'visa support', 'immigration assistance']
  },

  // Global Work Authorization - Expanded
  workAuthorization: {
    // Universal terms
    universal: ['authorized to work', 'eligible to work', 'work authorization', 'work permit', 'no visa required', 'visa sponsorship'],
    
    // Ireland specific
    ireland: ['eu citizen', 'eea citizen', 'stamp 4', 'critical skills permit', 'general employment permit', 'long term residence'],
    
    // UK specific  
    uk: ['right to work in uk', 'british citizen', 'settled status', 'pre-settled status', 'tier 2 visa', 'skilled worker visa'],
    
    // USA specific
    usa: ['authorized to work in us', 'us citizen', 'green card', 'h1-b visa', 'l1 visa', 'ead card', 'work authorization document'],
    
    // Canada specific
    canada: ['authorized to work in canada', 'canadian citizen', 'permanent resident', 'work permit', 'lmia exempt'],
    
    // Australia specific
    australia: ['authorized to work in australia', 'australian citizen', 'permanent resident', '482 visa', '189 visa', '190 visa'],
    
    // General sponsorship
    sponsorship: ['visa sponsorship required', 'open to sponsorship', 'sponsorship needed', 'willing to obtain visa']
  },

  // International Education Systems
  education: {
    // Degree types worldwide
    degrees: ['bachelor', 'honours', 'masters', 'doctorate', 'phd', 'mba', 'diploma', 'certificate'],
    
    // Grading systems
    gradingSystems: {
      uk: ['first class', '2:1', '2:2', 'third class', 'distinction', 'merit', 'pass'],
      ireland: ['first class honours', 'second class honours grade 1', 'second class honours grade 2'],
      usa: ['gpa', 'magna cum laude', 'summa cum laude', 'cum laude', 'dean\'s list'],
      europe: ['ects credits', 'bologna process'],
      international: ['distinction', 'high distinction', 'credit', 'pass', 'honours']
    },
    
    // Educational institutions
    institutions: ['university', 'college', 'institute', 'school', 'academy', 'polytechnic', 'conservatory']
  },

  // Cross-Cultural Skills
  culturalSkills: {
    communication: ['cross-cultural communication', 'multicultural awareness', 'cultural sensitivity', 'international mindset'],
    languages: ['multilingual', 'polyglot', 'bilingual', 'trilingual', 'language skills'],
    experience: ['international background', 'global perspective', 'cultural adaptability', 'diverse team experience'],
    travel: ['well-travelled', 'international travel', 'global exposure', 'cultural immersion']
  },

  // Industry-Specific Global Terms
  industries: {
    technology: ['fintech', 'edtech', 'healthtech', 'artificial intelligence', 'machine learning', 'blockchain', 'cybersecurity'],
    finance: ['investment banking', 'asset management', 'risk management', 'compliance', 'regulatory affairs', 'audit'],
    healthcare: ['telemedicine', 'medical devices', 'pharmaceuticals', 'biotechnology', 'clinical research'],
    consulting: ['management consulting', 'strategy consulting', 'business transformation', 'change management'],
    manufacturing: ['supply chain', 'logistics', 'quality assurance', 'lean manufacturing', 'six sigma'],
    marketing: ['digital marketing', 'content marketing', 'social media', 'seo', 'sem', 'email marketing'],
    sales: ['business development', 'account management', 'lead generation', 'crm', 'sales enablement']
  },

  // Professional Development
  development: {
    skills: ['continuous learning', 'professional development', 'upskilling', 'reskilling', 'lifelong learning'],
    methods: ['online courses', 'workshops', 'seminars', 'conferences', 'mentoring', 'coaching'],
    platforms: ['coursera', 'udemy', 'linkedin learning', 'edx', 'futurelearn', 'skillshare']
  },

  // Global Business Terms
  business: {
    operations: ['global operations', 'international markets', 'cross-border', 'multinational', 'worldwide'],
    strategy: ['market expansion', 'globalization', 'localization', 'international strategy', 'global partnerships'],
    compliance: ['gdpr', 'international regulations', 'cross-border compliance', 'global standards']
  }
}

// Function to get keywords by category and region
export function getKeywordsByCategory(
  category: keyof typeof GLOBAL_KEYWORDS,
  subcategory?: string,
  region?: string
): string[] {
  const categoryData = GLOBAL_KEYWORDS[category]
  
  if (!categoryData) return []
  
  if (subcategory && typeof categoryData === 'object' && subcategory in categoryData) {
    const subcategoryData = (categoryData as Record<string, unknown>)[subcategory]
    
    if (region && typeof subcategoryData === 'object' && subcategoryData && region in subcategoryData) {
      return ((subcategoryData as Record<string, unknown>)[region] as string[]) || []
    }
    
    if (Array.isArray(subcategoryData)) {
      return subcategoryData
    }
    
    // If subcategory is an object, return all values flattened
    if (typeof subcategoryData === 'object' && subcategoryData !== null) {
      return Object.values(subcategoryData).flat() as string[]
    }
  }
  
  // Return all keywords from category if no subcategory specified
  if (typeof categoryData === 'object') {
    return Object.values(categoryData).flat(3)
  }
  
  return []
}

// Function to get relevant keywords for a specific job market
export function getMarketKeywords(market: string): string[] {
  const keywords: string[] = []
  
  switch (market.toLowerCase()) {
    case 'ireland':
      keywords.push(
        ...getKeywordsByCategory('workAuthorization', 'ireland'),
        ...getKeywordsByCategory('education', 'gradingSystems', 'ireland'),
        'dublin', 'cork', 'galway', 'limerick'
      )
      break
      
    case 'uk':
      keywords.push(
        ...getKeywordsByCategory('workAuthorization', 'uk'),
        ...getKeywordsByCategory('education', 'gradingSystems', 'uk'),
        'london', 'manchester', 'birmingham', 'edinburgh'
      )
      break
      
    case 'usa':
      keywords.push(
        ...getKeywordsByCategory('workAuthorization', 'usa'),
        ...getKeywordsByCategory('education', 'gradingSystems', 'usa'),
        'new york', 'san francisco', 'chicago', 'boston'
      )
      break
      
    case 'canada':
      keywords.push(
        ...getKeywordsByCategory('workAuthorization', 'canada'),
        'toronto', 'vancouver', 'montreal', 'calgary'
      )
      break
      
    case 'australia':
      keywords.push(
        ...getKeywordsByCategory('workAuthorization', 'australia'),
        'sydney', 'melbourne', 'brisbane', 'perth'
      )
      break
      
    default:
      // Global keywords
      keywords.push(
        ...getKeywordsByCategory('remoteWork', 'arrangements'),
        ...getKeywordsByCategory('culturalSkills', 'communication'),
        ...getKeywordsByCategory('languages', 'english', 'professional')
      )
  }
  
  return keywords
}

// Function to analyze keyword density in text
export function analyzeKeywordDensity(
  text: string,
  targetKeywords: string[],
  market: string = 'global'
): {
  total: number
  matched: number
  missing: string[]
  density: { [key: string]: number }
  suggestions: string[]
} {
  const textLower = text.toLowerCase()
  const words = textLower.split(/\s+/).length
  
  const matched: string[] = []
  const missing: string[] = []
  const density: { [key: string]: number } = {}
  
  // Add market-specific keywords to target list
  const marketKeywords = getMarketKeywords(market)
  const allKeywords = [...new Set([...targetKeywords, ...marketKeywords])]
  
  allKeywords.forEach(keyword => {
    const keywordLower = keyword.toLowerCase()
    const regex = new RegExp(`\\b${keywordLower}\\b`, 'gi')
    const matches = textLower.match(regex)
    const count = matches ? matches.length : 0
    
    if (count > 0) {
      matched.push(keyword)
      density[keyword] = Math.round((count / words) * 1000) / 10 // Percentage with 1 decimal
    } else {
      missing.push(keyword)
    }
  })
  
  // Generate suggestions
  const suggestions: string[] = []
  if (matched.length < allKeywords.length * 0.4) {
    suggestions.push('Include more relevant keywords from the job description')
  }
  
  if (missing.includes('remote work') && !missing.includes('flexible work')) {
    suggestions.push('Consider mentioning remote work capabilities if relevant')
  }
  
  if (market !== 'global' && !matched.some(k => k.includes('authorized') || k.includes('citizen'))) {
    suggestions.push('Clearly state your work authorization status')
  }
  
  return {
    total: allKeywords.length,
    matched: matched.length,
    missing: missing.slice(0, 10), // Limit to top 10 missing
    density,
    suggestions
  }
}

export default GLOBAL_KEYWORDS